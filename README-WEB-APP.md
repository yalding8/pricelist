# 📱 Pricelist 顾问表单系统使用指南

## 🎯 功能介绍

这是一个**Web界面**，让销售顾问可以通过浏览器快速生成报价单：

✅ **友好的表单界面**：填写房源信息、优惠、礼品
✅ **可视化礼品选择**：点击勾选礼品，直观清晰
✅ **一键生成**：自动生成HTML和PNG两种格式
✅ **即时下载**：生成后立即下载，发送给客户

---

## 🚀 启动步骤

### 方法1：使用启动脚本（推荐）

```bash
./start-web-app.sh
```

### 方法2：直接运行Python

```bash
python3 pricelist-web-app.py
```

启动后，你会看到：

```
======================================================================
  Pricelist 顾问表单系统
======================================================================

🚀 启动Web服务...
📱 请在浏览器中打开: http://localhost:5001

💡 功能:
  - 填写房源信息和价格
  - 选择优惠和礼品
  - 一键生成HTML和PNG报价单

按 Ctrl+C 停止服务
======================================================================
 * Running on http://127.0.0.1:5000
```

---

## 📋 使用流程

### 1. 打开浏览器访问

在浏览器中打开：**http://localhost:5001**

### 2. 填写表单

#### 📋 房源信息
- **房源名称**：例如 "iQ Shoreditch"
- **户型**：例如 "Bronze Studio"
- **周租金**：例如 438
- **地址**：完整地址
- **租期**：选择开始和结束日期

#### 💳 房东优惠
- 点击 **"➕ 添加房东优惠"**
- 填写优惠名称和金额
- 例如："公寓直接返现 £400"

#### 🎁 异乡补贴
- 点击 **"➕ 添加异乡补贴"**
- 填写补贴名称和金额
- 例如："平台补贴价格 (£24/周) £1224"

#### 🎉 赠送礼包
- 点击礼品卡片选择（可多选）
- 礼品库包含：现金返现、接机服务、生活礼包等

#### 👤 顾问信息
- 填写你的姓名、电话、微信号

### 3. 生成报价单

点击 **"🚀 生成报价单"** 按钮

系统会：
1. 验证表单数据
2. 生成HTML网页版
3. 生成PNG长图（适合微信分享）
4. 显示报价汇总

### 4. 下载文件

生成成功后，会显示：

```
✅ 报价单生成成功！

[房源信息和价格汇总]

📄 下载HTML    🖼️ 下载PNG图片
```

点击按钮即可下载对应文件。

---

## 📁 生成的文件

每次生成会创建2个文件：

| 文件 | 格式 | 用途 | 大小 |
|------|------|------|------|
| `quote_20260117_174238.html` | HTML | 网页版，可在浏览器打开 | ~50KB |
| `quote_20260117_174238.png` | PNG | 长图，适合微信分享 | ~170KB |

文件名包含时间戳，不会覆盖之前的文件。

---

## 💡 使用技巧

### 快速填写示例数据

表单已预填部分默认值：
- ✅ 租期：今天到一年后
- ✅ 其他字段需要手动填写

### 优惠和补贴的区别

- **房东优惠**（蓝色标签）：由房东支付的优惠，例如早鸟价、长租折扣
- **异乡补贴**（红色标签）：由异乡好居支付的补贴，例如平台补贴、返现

### 礼品选择建议

- 💵 **现金返现**：最直接，客户最喜欢
- ✈️ **接机服务**：新生特别需要
- 🎁 **生活礼包**：增加价值感

---

## 🎨 界面预览

表单界面特点：
- 🎨 **渐变头部**：品牌色珊瑚红
- 📝 **清晰分区**：房源、优惠、礼品、顾问
- 🖱️ **可视化选择**：礼品网格，点击勾选
- ✅ **实时反馈**：表单验证，提交状态

生成结果展示：
- 📊 **价格汇总**：原价、到手价、节省金额
- 📥 **下载按钮**：HTML和PNG一键下载

---

## ⚠️ 常见问题

### Q: 无法访问 http://localhost:5001？

**A: 请检查：**
1. Flask服务是否正在运行
2. 终端是否显示 "Running on http://127.0.0.1:5000"
3. 尝试访问 http://127.0.0.1:5000

### Q: 点击"生成报价单"没有反应？

**A: 请确保：**
1. 所有必填项（标记*）都已填写
2. 周租金是有效数字
3. 租期结束晚于开始日期
4. 打开浏览器开发者工具查看错误信息（F12）

### Q: 生成的PNG图片太大？

**A: 当前PNG文件约170KB，这是正常大小：**
- 微信单张图片限制：20MB
- 当前大小完全适合微信传输
- 如需压缩，可使用图片压缩工具

### Q: 如何修改礼品库？

**A: 编辑 `pricelist-gift_library.yaml` 文件：**
```yaml
gift_library:
  - id: new_gift_001
    name: 新礼品名称
    value: 100
    category: cash
    icon: 💰
    description: 礼品说明
```

修改后重启Web服务即可生效。

### Q: 能否批量生成？

**A: 当前版本不支持批量生成，计划中的功能：**
- 导入Excel批量生成
- 保存常用模板
- 历史记录管理

---

## 🔧 技术架构

### 后端
- **Flask 3.1**: Web框架
- **Jinja2**: 模板引擎
- **Playwright**: PNG截图生成
- **PyYAML**: 礼品库配置

### 前端
- **HTML5 + CSS3**: 响应式界面
- **Vanilla JavaScript**: 无依赖，原生JS
- **Fetch API**: 异步数据提交

### 文件结构
```
pricelist/
├── pricelist-web-app.py           # Flask后端服务
├── templates/
│   └── form.html                  # 表单界面
├── pricelist-quote-wechat.html    # 微信版模板
├── pricelist-gift_library.yaml    # 礼品库配置
├── start-web-app.sh               # 启动脚本
└── README-WEB-APP.md              # 本文档
```

---

## 🚀 下一步计划

- [ ] 历史记录管理
- [ ] Excel批量导入
- [ ] 模板保存功能
- [ ] 爬虫集成（自动获取Special Offers）
- [ ] 多顾问协作

---

## 📞 支持

如有问题，请检查：
1. Python版本：3.9+
2. 依赖包：`pip3 list | grep -E "flask|jinja2|playwright|pyyaml"`
3. 浏览器：推荐Chrome/Safari/Firefox

---

**Happy quoting! 🎉**
